<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating Extensions | Shosetsu</title>
    <meta name="description" content="Free and open source novel reader for Android.">
    <meta name="generator" content="VuePress 1.3.1">
    
    
    <link rel="preload" href="/assets/css/0.styles.39fcf01f.css" as="style"><link rel="preload" href="/assets/js/app.1bdaaf6f.js" as="script"><link rel="preload" href="/assets/js/2.953633b9.js" as="script"><link rel="preload" href="/assets/js/9.a138f40c.js" as="script"><link rel="prefetch" href="/assets/js/10.612b9312.js"><link rel="prefetch" href="/assets/js/11.51bb3375.js"><link rel="prefetch" href="/assets/js/3.963825ca.js"><link rel="prefetch" href="/assets/js/4.39559208.js"><link rel="prefetch" href="/assets/js/5.9dc0d4d5.js"><link rel="prefetch" href="/assets/js/6.bcee05b4.js"><link rel="prefetch" href="/assets/js/7.76134909.js"><link rel="prefetch" href="/assets/js/8.69cce62e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.39fcf01f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/media/logo.svg" alt="Shosetsu" class="logo"> <span class="site-name can-hide">Shosetsu</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Need help?" class="dropdown-title"><span class="title">Need help?</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          FAQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/help/faq/" class="nav-link">
  Frequently Asked Questions
</a></li></ul></li><li class="dropdown-item"><h4>
          Guides
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/help/guides/getting-started/" class="nav-link">
  Getting started
</a></li><li class="dropdown-subitem"><a href="/help/guides/creating-extensions/" class="nav-link router-link-exact-active router-link-active">
  Creating extensions
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://discord.gg/ttSX7gB" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://f-droid.org/packages/com.github.doomsdayrs.apps.shosetsu/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  F-Droid
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/shosetsuorg/android-app" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Need help?" class="dropdown-title"><span class="title">Need help?</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          FAQ
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/help/faq/" class="nav-link">
  Frequently Asked Questions
</a></li></ul></li><li class="dropdown-item"><h4>
          Guides
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/help/guides/getting-started/" class="nav-link">
  Getting started
</a></li><li class="dropdown-subitem"><a href="/help/guides/creating-extensions/" class="nav-link router-link-exact-active router-link-active">
  Creating extensions
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://discord.gg/ttSX7gB" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://f-droid.org/packages/com.github.doomsdayrs.apps.shosetsu/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  F-Droid
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/shosetsuorg/android-app" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Home</a></li><li><a href="/help/faq/" class="sidebar-link">Frequently Asked Questions</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Guides</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/help/guides/getting-started/" class="sidebar-link">Getting started</a></li><li><a href="/help/guides/creating-extensions/" class="active sidebar-link">Creating Extensions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/help/guides/creating-extensions/#requirements" class="sidebar-link">Requirements</a></li><li class="sidebar-sub-header"><a href="/help/guides/creating-extensions/#setup" class="sidebar-link">Setup</a></li><li class="sidebar-sub-header"><a href="/help/guides/creating-extensions/#understanding-lua-extensions-and-libraries" class="sidebar-link">Understanding Lua Extensions and Libraries</a></li><li class="sidebar-sub-header"><a href="/help/guides/creating-extensions/#writing-your-extension" class="sidebar-link">Writing your extension</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="creating-extensions"><a href="#creating-extensions" class="header-anchor">#</a> Creating Extensions</h1> <p>Shosetsu uses Lua extensions and an API on which the whole app is modeled. <a href="https://www.lua.org/about.html" target="_blank" rel="noopener noreferrer">Lua<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a simple interperated language. We recommend skimming through <a href="https://www.lua.org/pil/contents.html" target="_blank" rel="noopener noreferrer">Programming in Lua<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and/or the <a href="https://www.lua.org/manual/5.1/" target="_blank" rel="noopener noreferrer">reference manual<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> before trying to start writing extensions.</p> <h2 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h2> <ul><li>An internet connection.</li> <li>Basic programming knowledge.</li> <li>Any text editor. An IDE is recommended, IntelliJ IDEA is highly suggested as this guide assumes you are using IDEA.</li></ul> <h2 id="setup"><a href="#setup" class="header-anchor">#</a> Setup</h2> <ol><li>Fork the <a href="https://github.com/ShosetsuOrg/extensions/fork" target="_blank" rel="noopener noreferrer">extensions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> repo and then clone it.<div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/username/extensions.git
</code></pre></div></li> <li><strong>OPTIONAL:</strong> Fork the <a href="https://github.com/ShosetsuOrg/kotlin-lib" target="_blank" rel="noopener noreferrer">kotlin-lib<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> repo and then clone it.<div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/username/kotlin-lib.git
</code></pre></div></li></ol> <h3 id="intellij-idea"><a href="#intellij-idea" class="header-anchor">#</a> IntelliJ IDEA</h3> <ol><li>Install the <strong><code>EmmyLua</code></strong> and <strong><code>Kotlin</code></strong> plugins (<strong><code>Settings &gt; Plugins &gt; Marketplace</code></strong>) and restart IDEA.</li> <li><strong><code>File &gt; Open</code></strong> the directory of the extensions repo.</li> <li>If you cloned <strong>kotlin-lib</strong>, <strong><code>File &gt; New &gt; Module from Existing Sources</code></strong> and open the extension-lib directory.</li> <li><strong><code>Edit Configurations</code></strong></li> <li>Press the <strong><code>+</code></strong> button, select <strong><code>Kotlin</code></strong> and name the new configuration <strong><code>Test</code></strong>.</li> <li>Set Main Class to <strong><code>Test</code></strong> in <strong><code>com.github.doomsdayrs.api.shosetsu.extensions</code></strong>, or <strong><code>com.github.doomsdayrs.api.shosetsu.extensions.core</code></strong> if you cloned the extension library.</li> <li>Set the working directory to the directory of your cloned repository</li> <li>In the lib, Select Test and open.</li> <li>Change configuration according to your needs.</li> <li>Run</li></ol> <h2 id="understanding-lua-extensions-and-libraries"><a href="#understanding-lua-extensions-and-libraries" class="header-anchor">#</a> Understanding Lua Extensions and Libraries</h2> <p>Each Lua Extension has the responsability for an individual site, but sites often use available software, which means they share the same codebase.
This is why extensions sometimes do not have any code but a call to <code>Require</code>.
A good example is the plethora of extensions based on the Madara library, which defer all logic to the Madara library.</p> <h3 id="extension-stucture"><a href="#extension-stucture" class="header-anchor">#</a> Extension Stucture</h3> <p>A Commented JSON Header is included at the start of the file:</p> <div class="language- extra-class"><pre class="language-text"><code>-- {&quot;id&quot;:9001,&quot;version&quot;:&quot;1.0.0&quot;,&quot;author&quot;:&quot;TechnoJo4&quot;}
</code></pre></div><p>An extension returns a table, the following fields are required:</p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th></tr></thead> <tbody><tr><td><code>id</code></td> <td><code>int</code></td> <td>Unique identifier to distinguish extensions</td></tr> <tr><td><code>name</code></td> <td><code>string</code></td> <td>Name of the extension</td></tr> <tr><td><code>baseURL</code></td> <td><code>string</code></td> <td>Base URL, usually a domain name prefixed with <code>https?://</code></td></tr> <tr><td><code>listings</code></td> <td><code>Listing[]</code></td> <td>The &quot;pages&quot; that the site provides that list novels. Sites usually only have a single one.</td></tr> <tr><td><code>getPassage</code></td> <td><code>fun(string): string</code></td> <td>Gets a chapter's content</td></tr> <tr><td><code>parseNovel</code></td> <td><code>fun(string): NovelInfo</code></td> <td>Gets a novel's info</td></tr> <tr><td><code>search</code></td> <td><code>fun(table&lt;int, any&gt;): Novel[]</code></td> <td>Used to search for novels</td></tr> <tr><td><code>updateSetting</code></td> <td><code>fun(int, any): void</code></td> <td>Used to update settings</td></tr></tbody></table> <p>The most important parts are listings, parseNovel and getPassage, but to write any of these you need to know how the create instances of the required types:</p> <p>The <code>Listing</code> type:</p> <div class="language- extra-class"><pre class="language-text"><code>Listing(
    name: string,
    isIncrementing: boolean,
    filters: Filter[]?,
    getListing: fun(data: table&lt;int, any&gt;?, inc: int?): Novel[]
)
</code></pre></div><p>TODO: EXPLAIN AND ADD OTHER TYPES</p> <h3 id="optionals"><a href="#optionals" class="header-anchor">#</a> Optionals</h3> <p>The following fields are optional:</p> <table><thead><tr><th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th></tr></thead> <tbody><tr><td><code>imageURL</code></td> <td><code>string</code></td> <td>Logo of website</td> <td><code>&quot;&quot;</code></td></tr> <tr><td><code>filters</code></td> <td><code>Filter[]</code></td> <td>Search filters</td> <td><code>{}</code></td></tr> <tr><td><code>settings</code></td> <td><code>Filter[]</code></td> <td>Global filters</td> <td><code>{}</code></td></tr> <tr><td><code>hasSearch</code></td> <td><code>boolean</code></td> <td>Self-explanatory</td> <td><code>false</code></td></tr> <tr><td><code>hasCloudFlare</code></td> <td><code>boolean</code></td> <td>Self-explanatory</td> <td><code>false</code></td></tr></tbody></table> <h2 id="writing-your-extension"><a href="#writing-your-extension" class="header-anchor">#</a> Writing your extension</h2> <p>Now that you understand the basics, you can get to writing your extension:</p> <ol><li>Copy <code>DefaultStructure.lua</code> to <code>src/LANG/NAME.lua</code>. LANG being the language of the website.</li> <li>Fill in required fields.</li> <li>Remove optionals that you do not need.</li> <li>Create functions according to specification, then run the test loop on your extension.</li> <li>TODO: COMPLETE</li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/shosetsuorg/website/edit/master/src/help/guides/creating-extensions.md" target="_blank" rel="noopener noreferrer">Help us improve this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/16/2020, 11:38:40 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/help/guides/getting-started/" class="prev">
        Getting started
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1bdaaf6f.js" defer></script><script src="/assets/js/2.953633b9.js" defer></script><script src="/assets/js/9.a138f40c.js" defer></script>
  </body>
</html>
